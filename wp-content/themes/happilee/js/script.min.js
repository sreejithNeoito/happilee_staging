(()=>{jQuery(function(t){t(document).ready(function(){if(t("#preloader").fadeOut("slow",function(){t("#page").fadeIn("slow")}),lottie.loadAnimation({container:document.getElementById("lottie-animation"),renderer:"svg",loop:!0,autoplay:!0,path:"/wp-content/themes/happilee/assets/lottie/preloader.json"}),t(".banner-form").length){let n=function(i){i.preventDefault();let l=a.getNumber(),o=a.getSelectedCountryData().dialCode;window.open("https://wa.me/918848803679?text=Hello,%20I%20want%20to%20know%20about%20https://happilee.io/","_blank")};var T=n;let e=t("#phone")[0],a=window.intlTelInput(e,{strictMode:!0,separateDialCode:!0,initialCountry:"auto",geoIpLookup:i=>{fetch("https://ipapi.co/json").then(l=>l.json()).then(l=>i(l.country_code)).catch(()=>i("us"))},loadUtilsOnInit:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/24.6.0/build/js/utils.min.js"});t(".banner-form").on("submit",n)}t(".happileeclients").length&&t(".happileeclients").owlCarousel({loop:!0,margin:30,nav:!1,dots:!1,autoplay:!0,slideTransition:"linear",autoplayTimeout:2e3,smartSpeed:2e3,autoplayHoverPause:!1,responsive:{0:{items:2},600:{items:4},1e3:{items:6}}}),t(".testimonials").length&&t(".testimonials").owlCarousel({loop:!0,nav:!1,dots:!0,autoplay:!0,slideTransition:"linear",autoplayTimeout:4e3,smartSpeed:450,autoplayHoverPause:!1,responsive:{0:{items:1},600:{items:1},1e3:{items:2}}}),t(".tab-menu").each(function(){let e=t(this),a=e.find("> .sub-menu"),n=t('<div class="tab-content"></div>'),i=t('<div class="tabs hidden"></div>');a.children("li").each(function(){let s=t(this).find("> .sub-menu").detach();s.length&&n.append(s)});let l=e.find("> ul").detach();i.append(l,n),e.append(i)}),t(".desk-nav .tab-menu").hover(function(){t(this).find(".tabs").removeClass("hidden"),t(this).find(".tabs").addClass("flex")},function(){t(this).find(".tabs").removeClass("flex"),t(this).find(".tabs").addClass("hidden")}),t(".desk-nav .tabs").hover(function(){t(this).removeClass("hidden"),t(this).addClass("flex")},function(){t(this).removeClass("flex"),t(this).addClass("hidden")}),t(".desk-nav .tab-content > ul").hide(),t(".desk-nav .tab-content > ul:first").show(),t(".desk-nav .tabs > ul li:first").addClass("active"),t(".desk-nav .tabs .sub-menu.sub-menu-0 > li").click(function(e){e.preventDefault();let a=t(this).index();t(".desk-nav .tab-content > ul").hide(),t(".desk-nav .tab-content > ul").eq(a).show(),t(".desk-nav .sub-menu.sub-menu-0 > li").removeClass("active"),t(this).addClass("active")}),t(".desk-nav .tab-menu").hover(function(){t(this).find(".tabs").removeClass("hidden"),t(this).find(".tabs").addClass("flex")},function(){t(this).find(".tabs").removeClass("flex"),t(this).find(".tabs").addClass("hidden")}),t(".desk-nav .tabs").hover(function(){t(this).removeClass("hidden"),t(this).addClass("flex")},function(){t(this).removeClass("flex"),t(this).addClass("hidden")}),t(".mob-nav .tab-menu").click(function(e){let a=t(this).outerWidth();e.pageX-t(this).offset().left>a-40&&(e.preventDefault(),t(this).find(".tabs").toggleClass("hidden flex"),t(this).toggleClass("active"))}),t(".mob-nav .tab-content > ul").hide(),t(".mob-nav .tab-content > ul:first").show(),t(".mob-nav .tabs > ul li:first").addClass("active"),t(".mob-nav .sub-menu.sub-menu-0 > li").click(function(e){let a=t(this).index();t(".mob-nav .tab-content > ul").hide(),t(".mob-nav .tab-content > ul").eq(a).show(),t(".mob-nav .sub-menu.sub-menu-0 > li").removeClass("active"),t(this).addClass("active")}),t(".mob-nav.main-menu > .menu-item.has-submenu:not(.tab-menu) ul").addClass("hidden"),t(".mob-nav.main-menu > .menu-item.has-submenu:not(.tab-menu)").click(function(e){let a=t(this).outerWidth();e.pageX-t(this).offset().left>a-40&&(e.preventDefault(),t(this).find("ul").toggleClass("hidden flex active"),t(this).toggleClass("active"))}),t(".nav-toggler").click(function(e){e.preventDefault(),t(".mob-menu-container").toggleClass("active"),t("body").toggleClass("mobile-menu-active"),t(".overlay-menu").toggleClass("wrapper-overlay")}),t(".scroll-to").click(function(e){e.preventDefault();var a=t(t(this).attr("href")),n=a.offset().top-50;t("html, body").animate({scrollTop:n},500)});function d(e,a,n,i,l=!1){t(window).on("scroll",function(){var o=t(e),s=a===""?o:t(a);if(o.length&&s.length){var w=t(window).scrollTop(),C=o.offset().top,W=o.outerHeight(),D=t(window).height();w+D>C+W&&w<C?(typeof i=="function"&&i(s),n&&!s.hasClass(n)&&s.addClass(n)):l&&n&&s.hasClass(n)&&s.removeClass(n)}})}function u(){t(window).width()<493&&d("#feat-one .feature-container .feat-image",'a[href="#feat-one"]',"active",function(e){t(".features-happilee a").removeClass("active")},!0),t(window).width()>493&&(d("#feat-one .feature-container .feature",'a[href="#feat-one"]',"active",function(e){t(".features-happilee a").removeClass("active")}),d("#feat-one .feature-container .feature","","active"),d("#feat-two .feature-container .feature","","active"),d("#feat-three .feature-container .feature","","active"),d("#feat-four .feature-container .feature","","active"),d("#feat-five .feature-container .feature","","active"),d("#feat-six .feature-container .feature","","active")),t(window).width()>743&&d(".container-logos-integration","","active")}u(),t(window).resize(function(){u()}),t(".features-happilee a").on("click",function(){t(".features-happilee a").removeClass("active"),t(this).addClass("active")});function h(){t(window).width()<=875?t(".features-happilee").scrollLeft()>0?t(".features-happilee").css("margin-left","0"):t(".features-happilee").css("margin-left","40px"):t(".features-happilee").css("margin-left","0")}h(),t(".features-happilee").on("scroll",function(){h()}),t(window).on("resize",function(){h()}),t("#toggle-categories").on("click",function(){t("#categories-container").toggleClass("hidden")}),t(document).on("click",function(e){!t(e.target).closest("#toggle-categories").length&&!t(e.target).closest("#categories-container").length&&t("#categories-container").addClass("hidden")});var r=null;t(window).on("scroll",function(){var e=t(window).scrollTop()+t(window).height(),a=!1;t(".post-content h1, .post-content h2, .post-content h3, .post-content h4, .post-content h5, .post-content h6").each(function(){var n=t(this),i=n.offset().top,l=i+n.outerHeight(),o=n.attr("id");if(e>=i&&e<=l&&!a){r&&r.removeClass("active");var s=t('.toc-item a[href="#'+o+'"]').parent();s.addClass("active"),r=s,a=!0}})});let c=t("#tocDropdown"),f=c.find(".selected-option"),p=c.find(".selected-text"),b=c.find(".selected-icon"),g=c.find(".dropdown-options"),m=g.find(".dropdown-item");f.on("click",function(){g.toggleClass("hidden")}),t(document).on("click",function(e){t(e.target).closest("#tocDropdown").length||g.addClass("hidden")}),m.on("click",function(){let e=t(this).data("value"),a=t(this).find(".text-sm").text(),n=t(this).find("svg").clone();p.text(a),b.empty().append(n),g.addClass("hidden"),t("html, body").animate({scrollTop:t("#"+e).offset().top},500)}),c.change(function(){var e=t(this).val();e&&t("html, body").animate({scrollTop:t("#"+e).offset().top},500)}),t(".cat_container .cat_count").on("click",function(){t(this).closest(".cat_container").find(".additional-categories").toggleClass("hidden flex")}),t("#searchInput").on("input",function(){let e=t(this).val();if(!e.trim()){t("#resultsBox").hide();return}let a=t("#searchInput").data("context")||"default",n=t("#searchInput").data("category-id")||null,i=t("#searchInput").data("taxonomy")||null,l=t("#searchInput").data("term-id")||null;t.ajax({url:ajax_obj.ajax_url,type:"POST",data:{action:"search_posts",query:e,context:a,category_id:n,taxonomy:i,term_id:l},success:function(o){let s=t("#resultsBox");s.empty(),o.length>0?(o.forEach(w=>{let C=`
                            <a href="${w.link}" class="search-result-item">
                                ${w.title}
                            </a>`;s.append(C)}),s.show()):(s.html('<div class="px-4 py-2 text-gray-500">No results found</div>'),s.show())},error:function(){console.error("AJAX request failed")}}),t(document).on("click",function(o){t(o.target).closest("#searchInput, #resultsBox").length||t("#resultsBox").hide()})}),t("#search_caseInput").on("input",function(){let e=t(this).val();if(!e.trim()){t("#caseResults").hide();return}let a=t("#search_caseInput").data("context")||"default";t.ajax({url:ajax_obj.ajax_url,type:"POST",data:{action:"search_caseStudies",query:e,context:a},success:function(n){let i=t("#caseResults");i.empty(),n.length>0?(n.forEach(l=>{let o=`
                            <a href="${l.link}" class="search-result-item">
                                ${l.title}
                            </a>`;i.append(o)}),i.show()):(i.html('<div class="px-4 py-2 text-gray-500">No results found</div>'),i.show())},error:function(){console.error("AJAX request failed")}}),t(document).on("click",function(n){t(n.target).closest("#search_caseInput, #caseResults").length||t("#caseResults").hide()})}),t(".faq-item-title").on("click",function(){let e=t(this).next(".faq-item-content"),a=t(this).find(".arrow-faq"),n=t(this).closest(".faq-item");e.slideToggle(),a.toggleClass("rotate-180"),n.toggleClass("active")});let x="INR",v="monthly";function k(){t(".price").each(function(){let e=t(this).attr(`data-${v}-enabled`)==="1",a=t(this).attr(`data-${v}-${x.toLowerCase()}`),n=t(this).parent().find(".price-duration"),i=t(this).attr(`data-${v}-custom-text`);e&&a!==void 0&&a!==""?(t(this).html((x==="INR"?"\u20B9 ":"$ ")+'<span class="text-20 leading-6 font-bold">'+a+'<span style="font-size:14px; font-weight:700; color:#1a1a1a;"> +GST</span> </span>'),n.text("/ Month")):(t(this).html('<span class="text-16 font-bold">'+i+"</span>"),n.text(""))}),t(".add_users").each(function(){let e=t(this).attr(`data-add-usr-${x.toLowerCase()}`);e!==void 0&&(t(this).find(".add_user_price").text(e+" /Month/User"),t(this).find(".currency-symbol").text(x==="INR"?"\u20B9 ":"$ "))})}t(document).on("click",".currency-switch",function(){t(".currency-switch").removeClass("bg-primary text-white"),t(this).addClass("bg-primary text-white"),x=t(this).attr("data-currency"),k()}),t(document).on("click",".duration-switch",function(){t(".duration-switch").removeClass("active bg-primary text-white"),t(this).addClass("active bg-primary text-white"),v=t(this).attr("data-duration"),k()}),t(document).on("click",".duration-dropdown-toggle",function(){t(".duration-dropdown").toggleClass("hidden")}),t(document).on("click",".duration-option",function(){let e=t(this).data("duration");v=e,t(".selected-label").html(t(this).html()),t(".duration-dropdown").addClass("hidden"),t(".duration-switch").removeClass("bg-primary text-white"),t(`.duration-switch[data-duration="${e}"]`).addClass("bg-primary text-white"),k()}),t(document).on("click",function(e){t(e.target).closest(".duration-dropdown-toggle, .duration-dropdown").length||t(".duration-dropdown").addClass("hidden")});let y=!0;t("#toggleCurrency").click(function(){y=!y,t("span[data-inr]").each(function(){let a=(y?t(this).data("inr"):t(this).data("usd")).match(/^(\D+)?\s?([\d.,]+)/);if(a){let n=a[1]||"",i=a[2]||"";t(this).html(`${n} <span class="text-20 leading-6 font-bold">${i}</span>`)}}),t("#toggleCurrency").text(y?"Switch to USD":"Switch to INR")}),t(".toggle-plan").change(function(){if(t(".toggle-plan:checked").length===0){alert("At least one plan must be selected."),t(this).prop("checked",!0);return}let n=`#${t(this).data("target")}-col`;t(n).toggle()});function _(){t('ul[id$="-features"]').each(function(){let e=t(this),a=t("#features-list .feature-item"),n=e.find("li");a.each(function(i){let l=t(this),o=n.eq(i);if(o.length){let s=l.outerHeight();s>0&&o.height(s)}})})}function I(e=20){let a=0;function n(){t("#features-list .feature-item").toArray().every(l=>{let o=t(l);return o.length&&o.outerHeight()>0&&o.is(":visible")})||a>=e?_():(a++,setTimeout(n,100))}n()}t(window).on("load",function(){I()}),t(window).on("resize",function(){t('ul[id$="-features"] li').css("height","auto"),requestAnimationFrame(_)}),t(document).on("click",".partner-switch",function(){t(".partner-switch").removeClass("bg-primary text-white active"),t(this).addClass("bg-primary text-white active");var e=t(this).data("partner");t(".offerings").addClass("hidden"),t('.offerings[data-partner="'+e+'"]').removeClass("hidden")}),t("#wa_generate_btn").on("click",function(){let e=t("#wa_number").val(),a=t("#wa_message").val(),n=t("#wa_terms").is(":checked");if(!e||!n){alert("Please enter a number and accept the terms.");return}t.post(ajax_obj.ajax_url,{action:"generate_wa_link",number:e,message:a},function(i){i.success?(t("#wa_link").val(i.data.link),t("#wa_open").attr("href",i.data.link),t("#wa_qr").attr("src",i.data.qr),t("#wa_download_qr").attr("href",i.data.qr),t("#wa_form").hide(),t("#wa_result").show()):alert(i.data.message||"Something went wrong.")})}),t("#wa_copy_btn").on("click",function(){t("#wa_link").select(),document.execCommand("copy"),alert("Link copied!")}),t("#wa_retry_btn").on("click",function(){t("#wa_form").show(),t("#wa_result").hide(),t("#wa_number, #wa_message").val(""),t("#wa_terms").prop("checked",!1)}),t("#happilee-chatbot").on("click",function(){t("#chat-popup").removeClass("hidden")}),t("#close-popup").on("click",function(){t("#chat-popup").addClass("hidden")}),t(document).on("click",function(e){t("#chat-popup").hasClass("hidden")||!t(e.target).closest("#chat-popup").length&&!t(e.target).closest("#happilee-chatbot").length&&t("#chat-popup").addClass("hidden")}),t("#chat-popup").on("click",function(e){e.stopPropagation()})})});jQuery(document).ready(function(t){t("#btnColor").on("input",function(){let u=t(this).val();t("#colorDisplay").attr("placeholder",u)}),t("#colorDisplay").on("click",function(){t("#btnColor").trigger("click")});function d(){let u=t("#btnColor").val(),h=t("#btnText").val(),r=t("#colorScheme").val(),c=t('input[name="position"]:checked').val(),f=t("#marginLeft").val(),p=t("#marginRight").val(),b=t("#marginBottom").val(),g=t("#cornerRadius").val(),m=t("#previewButton");m.html(`<img src="https://img.icons8.com/ios-filled/24/ffffff/whatsapp.png" class="mr-2" /> ${h}`),m.css({backgroundColor:u,borderRadius:`${g}px`,marginLeft:`${f}px`,marginRight:`${p}px`,marginBottom:`${b}px`,color:r==="light"?"#ffffff":"#000000"}),m.css("float",c)}t("input, select, textarea").on("input change",d),t("#generateBtn").on("click",function(){if(!t("#terms").is(":checked")){alert("Please accept the Terms & Conditions.");return}let u=t("#whatsappNumber").val(),h=encodeURIComponent(t("#welcomeMessage").val()),r=t("#btnText").val(),c=t("#btnColor").val(),f=t("#cornerRadius").val(),p=t('input[name="position"]:checked').val(),b=t("#marginLeft").val(),g=t("#marginRight").val(),m=t("#marginBottom").val(),v=`
<a href="${`https://wa.me/${u}?text=${h}`}" target="_blank" style="position:fixed;bottom:${m}px;${p}:${p==="left"?b:g}px;background:${c};border-radius:${f}px;padding:12px 16px;color:#fff;text-decoration:none;font-family:sans-serif;">
  <img src="https://img.icons8.com/ios-filled/24/ffffff/whatsapp.png" style="margin-right:8px;vertical-align:middle;">
  ${r}
</a>`;t("#chatbtnop,#chatbtnip").toggleClass("hidden"),t("#generatedCode").val(v)}),t("#tryanotherchatbtn").click(function(u){u.preventDefault(),t("#chatbtnop,#chatbtnip").toggleClass("hidden")}),t("#copyCode").on("click",function(){t("#generatedCode").select(),document.execCommand("copy"),alert("Code copied to clipboard!")}),d()});jQuery(document).ready(function(t){let d=()=>{t("#colorDisplayheader").attr("placeholder",t("#btnColorHeader").val()),t("#colorDisplayWid").attr("placeholder",t("#btnColorWid").val())};t("#btnColorHeader, #btnColorWid").on("input",function(){let r=t(this).attr("id")==="btnColorHeader"?"#colorDisplayheader":"#colorDisplayWid";t(r).attr("placeholder",t(this).val()),h()}),t("#colorDisplayheader, #colorDisplayWid").on("click",function(){let r=t(this).attr("id")==="colorDisplayheader"?"#btnColorHeader":"#btnColorWid";t(r).trigger("click")});function u(){let r=new Date,c=r.getHours(),f=r.getMinutes().toString().padStart(2,"0"),p=c>=12?"PM":"AM";return c=c%12||12,`${c}:${f} ${p}`}let h=()=>{let r=`
            <div class="widget-preview" style="
                position: relative;
				border:1px solid #969696;
                max-width: 300px;
                background: #fff;
                border-radius: 24px;
                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                font-family: sans-serif;
                margin: 20px auto;
				background-color:#f1f1f1;
            ">
                <div class="widget-header" style="
                    background: ${t("#btnColorHeader").val()};
                    color: ${t("#colorSchemeHeader").val()==="light"?"#ffffff":"#000000"};
                    padding: 16px;
                    border-radius: 24px 24px 0 0;
                ">
                    <div style="display: flex; align-items: center; gap: 12px;">
                        ${t("#brandlogo").val()?`
                            <img src="${t("#brandlogo").val()}" 
                                 style="width: 40px; height: 40px; border-radius: 50%; object-fit: contain;">`:""}
                        <div>
                            <h3 style="margin: 0; font-size: 16px; font-weight: 600;">
                                ${t("#brandtitle").val()||"Brand Name"}
                            </h3>
                            <p style="margin: 0; font-size: 14px;">
                                ${t("#subtitle").val()||"Always available"}
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="widget-body" style="padding: 16px;">
                    
					<div style="position: relative; display: inline-block; background: white; border-radius: 16px; padding: 12px 16px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); max-width: 260px; font-family: sans-serif; font-size: 14px; color: #333; line-height: 1.4;">
						<div style="color: #999; font-size: 12px; margin-bottom: 4px;">${t("#brandtitle").val()||"Brand Name"}</div>
						<div style="font-weight: bold;">${t("#greetingtext").val()||"Hi there, how can I help you?"}</div>
						<div style="text-align: right; color: #999; font-size: 12px; margin-top: 8px;">${u()||"12:30 PM"}</div>
						<div style="position: absolute; top: 12px; left: -8px; width: 0; height: 0; border-top: 8px solid transparent; border-bottom: 8px solid transparent; border-right: 8px solid white;"></div>
					</div>
                    <a href="#" class="preview-button" style="
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        gap: 8px;
                        background: ${t("#btnColorWid").val()};
                        color: ${t("#colorSchemeWid").val()==="light"?"#ffffff":"#000000"};
                        border-radius: ${t("#cornerRadiusBtnWid").val()}px;
                        padding: 12px 16px;
                        text-decoration: none;
                        font-weight: 500;
						width:max-content;
						margin:0px auto;
						margin-top:40px;
                    ">
                        <img src="https://img.icons8.com/ios-filled/24/ffffff/whatsapp.png" 
                             style="width: 20px; height: 20px;">
                        ${t("#ctaText").val()||"Chat Now"}
                    </a>
                </div>
            </div>
        `;t("#previewAreawid").html(r)};t("input, select, textarea").on("input change",function(){t(this).attr("id")==="btnColorHeader"&&t("#colorDisplayheader").attr("placeholder",t(this).val()),t(this).attr("id")==="btnColorWid"&&t("#colorDisplayWid").attr("placeholder",t(this).val()),h()}),t("#generateBtnWid").on("click",function(){if(!t("#termsWid").is(":checked")){alert("Please accept the Terms & Conditions.");return}let r=t("#whatsappNumber").val(),c=encodeURIComponent(t("#welcomeMessage").val()),f=`
<!-- WhatsApp Widget -->
<div style="
    position: fixed;
    bottom: 24px;
    right: 24px;
    max-width: 300px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    font-family: sans-serif;
    z-index: 1000;
">
    <div style="
        background: ${t("#btnColorHeader").val()};
        color: ${t("#colorSchemeHeader").val()==="light"?"#ffffff":"#000000"};
        padding: 16px;
        border-radius: 8px 8px 0 0;
    ">
        <div style="display: flex; align-items: center; gap: 12px;">
            ${t("#brandlogo").val()?`
                <img src="${t("#brandlogo").val()}" 
                     style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">`:""}
            <div>
                <h3 style="margin: 0; font-size: 16px; font-weight: 600;">
                    ${t("#brandtitle").val()}
                </h3>
                <p style="margin: 0; font-size: 14px;">
                    ${t("#subtitle").val()}
                </p>
            </div>
        </div>
    </div>
    
    <div style="padding: 16px;">
        <p style="margin: 0 0 12px 0; font-size: 14px; color: #666;">
            ${t("#greetingtext").val()}
        </p>
        <a href="https://wa.me/${r}?text=${c}" 
           target="_blank"
           style="
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 8px;
                background: ${t("#btnColorWid").val()};
                color: ${t("#colorSchemeWid").val()==="light"?"#ffffff":"#000000"};
                border-radius: ${t("#cornerRadiusBtnWid").val()}px;
                padding: 12px 16px;
                text-decoration: none;
                font-weight: 500;
				width: max-content;
                margin: 0px auto;
           ">
            <img src="https://img.icons8.com/ios-filled/24/ffffff/whatsapp.png" 
                 style="width: 20px; height: 20px;">
            ${t("#ctaText").val()}
        </a>
    </div>
</div>
<!-- End WhatsApp Widget -->`.trim();t("#generatedCodeWid").val(f),t("#chatwidop, #chatwidip").toggleClass("hidden")}),t("#copyCodeWid").on("click",function(){t("#generatedCodeWid").select(),document.execCommand("copy"),alert("Widget code copied to clipboard!")}),t("#tryanotherWid").click(function(r){r.preventDefault(),t("#chatwidop, #chatwidip").toggleClass("hidden"),t("#previewAreawid").html(widgetCode)}),d(),h()});})();
